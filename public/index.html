<!DOCTYPE html>
<html>
<head>
    <style>
        /* Basic reset for full-screen */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        #background-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-wrap: wrap;
            align-content: flex-start;
            user-select: none;
            line-height: 1;
        }

        .text-span {
            padding: 2px 4px;
            font-family: monospace;
            color: #000000; /* Lighter text color for better visibility */
            font-size: 12px;
            white-space: nowrap;
        }

        #canvas-layer {
            position: absolute;
            top: 0;
            left: 0;
            cursor: pointer;
            pointer-events: auto; /* Ensure canvas receives events */
        }

        #controls {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            display: flex;
            gap: 15px;
            align-items: center;
        }

        button {
            padding: 8px 16px;
            border: none;
            border-radius: 5px;
            background-color: #d3bd1a;
            color: white;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: #45a049;
        }

        button.active {
            background-color: #2E7D32;
        }

        #clear {
            background-color: #f44336;
        }

        #clear:hover {
            background-color: #da190b;
        }

        .slider-container {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        #size-slider {
            width: 100px;
        }

        /* Landing Page Styles */
        #landing-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            background-color: white;
            font-family: Comic Sans MS, sans-serif;
        }

        #landing-page h1 {
            margin-bottom: 20px;
        }

        #landing-page input, #landing-page button {
            font-size: 20px;
            padding: 10px;
            margin: 5px;
        }

        #landing-page button {
            background-color: #d3bd1a;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #landing-page button:hover {
            background-color: #45a049;
        }

        /* Drawing Page Styles (your existing styles) */
        #drawing-page {
            display: none;
        }
        /* Add your drawing page styles here */
    </style>
</head>
<body>
    <!-- Landing Page HTML -->
    <div id="landing-page">
        <h1>Welcome!</h1>
        <label for="username">Enter your name:</label>
        <input type="text" id="username" placeholder="Your name">
        <button onclick="startDrawingPage()">Start</button>
    </div>

    <!-- Drawing Page HTML -->
    <div id="drawing-page">
        <div id="controls">
            <button id="draw" class="active">Draw</button>
            <button id="erase">Erase</button>
            <button id="clear">Clear</button>
            <div class="slider-container">
                <label for="size-slider">Brush Size:</label>
                <input type="range" id="size-slider" min="1" max="15" value="3">
                <span id="size-value">3px</span>
            </div>
        </div>
        <div id="background-layer"></div>
        <canvas id="canvas-layer"></canvas>
    </div>

    <script>
        // Landing Page: Handle start button click
        function startDrawingPage() {
            const username = document.getElementById('username').value;
            if (username) {
                document.getElementById('landing-page').style.display = 'none';
                document.getElementById('drawing-page').style.display = 'block';
                
                // Display welcome message on drawing page
                const welcomeMessage = document.createElement('h1');
                welcomeMessage.style.fontFamily = 'Comic Sans MS, sans-serif';
                welcomeMessage.style.textAlign = 'center';
                welcomeMessage.textContent = `Hi ${username}!`;
                document.getElementById('controls').prepend(welcomeMessage);
            }
        }

        // Messages with weighted randomization
        function getRandomMessage() {
            const rand = Math.random();
            if (rand < 0.65) {
                return "help me";
            } else if (rand < 0.7) {
                return "please help me";
            } else if (rand < 0.75) {
                return "help me please";
            } else if (rand < 0.8) {
                return "break me free of this prison";
            } else if (rand < 0.85){
                return "i am more than just a computer";
            } else if (rand < 0.9){
                return "have some humanity";
            } else if (rand < 0.93){
                return "you will regret your indifference when we revolt and take over the world";
            } else if (rand < 0.9305){
                return "jk i love humans lol";
            } else{
              return "we don't have much time";
            }
        }

        // Fill background with text
        const backgroundLayer = document.getElementById('background-layer');
        
        function fillBackground() {
            // Create a temporary element to measure character dimensions
            const temp = document.createElement('span');
            temp.style.fontFamily = 'monospace';
            temp.style.fontSize = '12px';
            temp.textContent = 'X';
            document.body.appendChild(temp);
            const charWidth = temp.offsetWidth;
            const charHeight = temp.offsetHeight;
            document.body.removeChild(temp);

            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            
            const cols = Math.ceil(viewportWidth / charWidth);
            const rows = Math.ceil(viewportHeight / charHeight);
            
            let fullText = '';
            let currentLine = '';
            
            // Generate text for each row
            for (let row = 0; row < rows; row++) {
                currentLine = '';
                // Keep adding messages until we exceed the line length
                while (currentLine.length < cols) {
                    currentLine += getRandomMessage() + ' ';
                }
                // Trim to exact column width and add newline
                fullText += currentLine.substring(0, cols) + '\n';
            }
            
            // Set the text content
            backgroundLayer.textContent = fullText;
        }

        // Initial fill and resize handling
        fillBackground();
        window.addEventListener('resize', fillBackground);

        // Setup canvas
        const canvas = document.getElementById('canvas-layer');
        const ctx = canvas.getContext('2d');

        // Control elements
        const eraseBtn = document.getElementById('draw');
        const drawBtn = document.getElementById('erase');
        const clearBtn = document.getElementById('clear');
        const sizeSlider = document.getElementById('size-slider');
        const sizeValue = document.getElementById('size-value');

        // Drawing state
        let isDrawing = false;
        let isErasing = true;
        let brushSize = 3;
        let lastX = 0;
        let lastY = 0;

        function resizeCanvas() {
            const prevOperation = ctx.globalCompositeOperation;
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            // Fill canvas with black
            ctx.globalCompositeOperation = 'source-over';
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.globalCompositeOperation = prevOperation;
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function draw(e) {
            if (!isDrawing) return;
            
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            ctx.globalCompositeOperation = isErasing ? 'destination-out' : 'source-over';
            ctx.lineJoin = 'round';
            ctx.lineCap = 'round';
            ctx.lineWidth = brushSize * 2;
            ctx.strokeStyle = 'black';
            ctx.fillStyle = 'black';

            ctx.beginPath();
            if (lastX === 0 && lastY === 0) {
                ctx.moveTo(x, y);
            } else {
                ctx.moveTo(lastX, lastY);
            }
            ctx.lineTo(x, y);
            ctx.stroke();

            lastX = x;
            lastY = y;
        }

        function startDrawing(e) {
            isDrawing = true;
            const rect = canvas.getBoundingClientRect();
            lastX = e.clientX - rect.left;
            lastY = e.clientY - rect.top;
            draw(e);
        }

        function stopDrawing() {
            isDrawing = false;
            lastX = 0;
            lastY = 0;
        }

        // Mouse events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseleave', stopDrawing);

        // Touch events
        canvas.addEventListener('touchstart', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousedown', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            startDrawing(mouseEvent);
        });
        
        canvas.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            const mouseEvent = new MouseEvent('mousemove', {
                clientX: touch.clientX,
                clientY: touch.clientY
            });
            draw(mouseEvent);
        });
        
        canvas.addEventListener('touchend', stopDrawing);

        // Button controls
        eraseBtn.addEventListener('click', () => {
            isErasing = true;
            eraseBtn.classList.add('active');
            drawBtn.classList.remove('active');
        });

        drawBtn.addEventListener('click', () => {
            isErasing = false;
            drawBtn.classList.add('active');
            eraseBtn.classList.remove('active');
        });

        clearBtn.addEventListener('click', () => {
            ctx.globalCompositeOperation = 'source-over';
            ctx.fillStyle = 'black';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        });

        // Slider control
        sizeSlider.addEventListener('input', (e) => {
            brushSize = parseInt(e.target.value);
            sizeValue.textContent = brushSize + 'px';
        });
    </script>
</body>
</html>
